# ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆé–“ã®ç›¸äº’èªè­˜ã¨äº¤æ›å‡¦ç†ã®å®Ÿè£…

## 1. ã™ã¹ã¦ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒè¿‘ãã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’è¦‹ã‚‹ä»•çµ„ã¿

### âœ… ã¯ã„ã€ã™ã¹ã¦ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒåŒã˜ã‚ˆã†ã«å‹•ä½œã—ã¾ã™

å„ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¯**å¯¾ç­‰ãªåˆ†æ•£ãƒãƒ¼ãƒ‰**ã¨ã—ã¦å‹•ä½œã—ã€ä»¥ä¸‹ã®ã‚µã‚¤ã‚¯ãƒ«ã‚’å®Ÿè¡Œã—ã¾ã™ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Agent 1                   Agent 2        Agent 3    â”‚
â”‚   â†“ãƒ–ãƒ­ãƒ¼ãƒ‰ã‚­ãƒ£ã‚¹ãƒˆ         â†“              â†“        â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚   â”‚   Gossipsub P2P Network              â”‚          â”‚
â”‚   â”‚  (å…¨ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒæƒ…å ±ã‚’å…±æœ‰)          â”‚          â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚   â†“å—ä¿¡                   â†“å—ä¿¡          â†“å—ä¿¡      â”‚
â”‚   ãƒ»Agent2ã®ä½ç½®ã‚’ä¿å­˜     ãƒ»Agent1ã®ä½ç½®   ãƒ»Agent1ã®ä½ç½®â”‚
â”‚   ãƒ»Agent3ã®ä½ç½®ã‚’ä¿å­˜     ãƒ»Agent3ã®ä½ç½®   ãƒ»Agent2ã®ä½ç½®â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### å„ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®å‹•ä½œï¼ˆè¡Œ492-558ï¼‰

**1ç§’ã”ã¨ã«è‡ªåˆ†ã®æƒ…å ±ã‚’ãƒ–ãƒ­ãƒ¼ãƒ‰ã‚­ãƒ£ã‚¹ãƒˆ:**
```rust
// è¡Œ492-505: ã™ã¹ã¦ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒå®Ÿè¡Œ
_ = tokio::time::sleep(...) => {
    let pos_json = serde_json::json!({
        "type": "position",
        "peer_id": local_peer_id_str,    // è‡ªåˆ†ã®ID
        "pos": [p.0, p.1],               // è‡ªåˆ†ã®ç¾åœ¨ä½ç½®
        "goal": [my_goal.0, my_goal.1],  // è‡ªåˆ†ã®ã‚´ãƒ¼ãƒ«ä½ç½®
        "timestamp": timestamp
    });
    swarm.publish(topic, pos_json);  // â† å…¨å“¡ã«é€ä¿¡
}
```

**ä»–ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®æƒ…å ±ã‚’å—ä¿¡ã—ã¦ä¿å­˜:**
```rust
// è¡Œ533-558: ã™ã¹ã¦ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒå®Ÿè¡Œ
SwarmEvent::Gossipsub(Event::Message { message, .. }) => {
    if val.get("type") == "position" {
        // ä»–ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®æƒ…å ±ã‚’æŠ½å‡º
        let current_pos = (px, py);
        let goal_pos = (gx, gy);
        
        // â˜… è‡ªåˆ†ã®NearbyAgentsã«ä¿å­˜
        nearby_agents.update(AgentInfo {
            peer_id: peer_id_str,
            current_pos,
            goal_pos,
            timestamp,
        });
    }
}
```

### è¿‘éš£ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ï¼ˆè¡Œ73-77ï¼‰

å„ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¯ç§»å‹•ã®åº¦ã«**è‡ªåˆ†ã®å‘¨å›²5ãƒã‚¹ä»¥å†…**ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã ã‘ã‚’å–å¾—ï¼š

```rust
fn get_nearby(&self, my_pos: Point, radius: usize) -> Vec<AgentInfo> {
    self.agents.values()
        .filter(|agent| 
            manhattan_distance(my_pos, agent.current_pos) <= radius
        )
        .cloned()
        .collect()
}
```

**ä¾‹:**
```
Agent 1ã®ä½ç½®: (10, 10)
åŠå¾„: 5ãƒã‚¹

Agent 2: (12, 12) â†’ è·é›¢ = |10-12| + |10-12| = 4 âœ… ç¯„å›²å†…
Agent 3: (20, 20) â†’ è·é›¢ = |10-20| + |10-20| = 20 âŒ ç¯„å›²å¤–
Agent 4: (11, 14) â†’ è·é›¢ = |10-11| + |10-14| = 5 âœ… ç¯„å›²å†…

Agent 1ãŒè¦‹ã‚‹è¿‘éš£ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ = [Agent 2, Agent 4]
```

---

## 2. äº¤æ›å‡¦ç†ã®å®Ÿè£…ç®‡æ‰€

ç¾åœ¨ã®å®Ÿè£…ã«ã¯**3ç¨®é¡ã®äº¤æ›å‡¦ç†**ãŒã‚ã‚Šã¾ã™ï¼š

### ğŸ“Œ ã‚¿ã‚¤ãƒ—1: ã‚¿ã‚¹ã‚¯äº¤æ›ï¼ˆTask Swapï¼‰

**ç›®çš„:** ç›®çš„åœ°ã«ä»–ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒã„ã‚‹å ´åˆã€ã‚¿ã‚¹ã‚¯ã‚’äº¤æ›ã™ã‚‹

#### é€ä¿¡å´ï¼ˆè¡Œ698-717ï¼‰
```rust
// ã‚¿ã‚¹ã‚¯å—ä¿¡æ™‚ã«ã€pickup/deliveryã«ä»–ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒã„ã‚‹ã‹ãƒã‚§ãƒƒã‚¯
for (peer, pos) in &peer_positions {
    if Some(*pos) == pickup || Some(*pos) == delivery {
        // â˜… ã‚¿ã‚¹ã‚¯äº¤æ›ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡
        let swap_req = serde_json::json!({
            "type": "swap_request",
            "from_peer": local_peer_id_str,
            "to_peer": peer,
            "task": task  // è‡ªåˆ†ã®ã‚¿ã‚¹ã‚¯ã‚’é€ã‚‹
        }).to_string();
        swarm.publish(topic, swap_req.as_bytes());
        
        println!("Sent swap_request to {}", peer);
        swap_sent = true;
        break;
    }
}
```

#### å—ä¿¡å´ï¼ˆè¡Œ598-623ï¼‰
```rust
// swap_requestã‚’å—ä¿¡
if val.get("type") == "swap_request" {
    if let (Some(from_peer), Some(task_val)) = 
        (val.get("from_peer"), val.get("task")) {
        
        println!("[SWAP] swap request from {}", from_peer_str);
        
        // â˜… è‡ªåˆ†ã®ã‚¿ã‚¹ã‚¯ã‚’ç›¸æ‰‹ã«é€ã‚Šè¿”ã™
        let swap_response = serde_json::json!({
            "type": "swap_response",
            "from_peer": local_peer_id_str,
            "to_peer": from_peer_str,
            "task": my_task_val  // è‡ªåˆ†ã®ã‚¿ã‚¹ã‚¯
        });
        swarm.publish(topic, swap_response.as_bytes());
        
        // â˜… å—ä¿¡ã—ãŸã‚¿ã‚¹ã‚¯ã«åˆ‡ã‚Šæ›¿ãˆ
        if let Ok(new_task) = serde_json::from_value(task_val) {
            my_task = Some(new_task);
        }
    }
}
```

#### ãƒ¬ã‚¹ãƒãƒ³ã‚¹å—ä¿¡å´ï¼ˆè¡Œ629-673ï¼‰
```rust
// swap_responseã‚’å—ä¿¡
if val.get("type") == "swap_response" {
    if let Some(task_val) = val.get("task") {
        println!("[SWAP] Received swapped task");
        
        // â˜… äº¤æ›ã•ã‚ŒãŸã‚¿ã‚¹ã‚¯ã‚’å®Ÿè¡Œ
        my_task = Some(new_task.clone());
        
        // TSWAPãƒ™ãƒ¼ã‚¹ã§æ–°ã—ã„ã‚¿ã‚¹ã‚¯ã‚’å®Ÿè¡Œ
        my_goal = pickup;
        while current_pos != pickup {
            let nearby = nearby_agents.get_nearby(current_pos, 5);
            let next_pos = compute_next_move_with_tswap(...);
            ...
        }
    }
}
```

---

### ğŸ“Œ ã‚¿ã‚¤ãƒ—2: ã‚´ãƒ¼ãƒ«äº¤æ›ï¼ˆGoal Swapï¼‰- âš ï¸ éƒ¨åˆ†å®Ÿè£…

**ç›®çš„:** æ¬¡ã®ä½ç½®ã«ã„ã‚‹ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒã‚´ãƒ¼ãƒ«ã«ã„ã‚‹å ´åˆã€ãŠäº’ã„ã®ã‚´ãƒ¼ãƒ«ã‚’äº¤æ›

#### å®Ÿè£…ç®‡æ‰€ï¼ˆè¡Œ231-236ï¼‰
```rust
// æ¬¡ã®ä½ç½®ã«ä»–ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒã„ã‚‹ã‹ãƒã‚§ãƒƒã‚¯
if let Some(blocking_agent) = nearby_agents.iter()
    .find(|a| a.current_pos == next_pos) {
    
    // ç›¸æ‰‹ãŒã‚´ãƒ¼ãƒ«ã«ã„ã‚‹å ´åˆ
    if blocking_agent.current_pos == blocking_agent.goal_pos {
        println!("[TSWAP] Agent at goal, requesting goal swap");
        // âš ï¸ TODO: ã‚´ãƒ¼ãƒ«äº¤æ›ã¯ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ³ã‚°ã§è¡Œã†ï¼ˆæœªå®Ÿè£…ï¼‰
        return my_pos; // ä»Šå›ã¯ç§»å‹•ã›ãšå¾…æ©Ÿ
    }
}
```

**ç¾çŠ¶:** 
- âœ… ã‚´ãƒ¼ãƒ«ã«ã„ã‚‹ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’æ¤œå‡º
- âŒ å®Ÿéš›ã®ã‚´ãƒ¼ãƒ«äº¤æ›ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ³ã‚°å‡¦ç†ã¯æœªå®Ÿè£…
- ç¾åœ¨ã¯å¾…æ©Ÿã™ã‚‹ã®ã¿

**å®Œå…¨å®Ÿè£…ã®å ´åˆ:**
```rust
// ææ¡ˆ: ã‚´ãƒ¼ãƒ«äº¤æ›ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
let goal_swap_req = serde_json::json!({
    "type": "goal_swap_request",
    "from_peer": local_peer_id_str,
    "to_peer": blocking_agent.peer_id,
    "my_goal": my_goal
});
```

---

### ğŸ“Œ ã‚¿ã‚¤ãƒ—3: ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆTarget Rotationï¼‰- âš ï¸ éƒ¨åˆ†å®Ÿè£…

**ç›®çš„:** ãƒ‡ãƒƒãƒ‰ãƒ­ãƒƒã‚¯ã‚µã‚¤ã‚¯ãƒ«ã‚’æ¤œå‡ºã—ãŸå ´åˆã€è¤‡æ•°ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®ã‚´ãƒ¼ãƒ«ã‚’å›è»¢

#### å®Ÿè£…ç®‡æ‰€ï¼ˆè¡Œ238-276ï¼‰
```rust
// ãƒ‡ãƒƒãƒ‰ãƒ­ãƒƒã‚¯æ¤œå‡º
let mut visited = HashSet::new();
let mut current_agent = blocking_agent;
let mut deadlock_chain = vec![my_pos];

loop {
    if visited.contains(&current_agent.current_pos) {
        // ãƒ‡ãƒƒãƒ‰ãƒ­ãƒƒã‚¯ã‚µã‚¤ã‚¯ãƒ«æ¤œå‡º
        if current_agent.current_pos == my_pos {
            println!("[TSWAP] Deadlock detected, need target rotation");
            // âš ï¸ TODO: ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã¯ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ³ã‚°ã§èª¿æ•´ï¼ˆæœªå®Ÿè£…ï¼‰
        }
        break;
    }
    
    visited.insert(current_agent.current_pos);
    deadlock_chain.push(current_agent.current_pos);
    
    // æ¬¡ã®ãƒ–ãƒ­ãƒƒã‚­ãƒ³ã‚°ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’æ¢ã™
    let blocking_next = nearby_agents.iter().find(|a| {
        manhattan_distance(current_agent.current_pos, a.current_pos) <= 1
    });
    
    if let Some(next) = blocking_next {
        current_agent = next;
    } else {
        break;
    }
}

// ç§»å‹•ã§ããªã„å ´åˆã¯å¾…æ©Ÿ
return my_pos;
```

**ç¾çŠ¶:**
- âœ… ãƒ‡ãƒƒãƒ‰ãƒ­ãƒƒã‚¯ã‚µã‚¤ã‚¯ãƒ«ã‚’æ¤œå‡º
- âœ… ã‚µã‚¤ã‚¯ãƒ«ã«é–¢ä¸ã™ã‚‹ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’ç‰¹å®š
- âŒ å®Ÿéš›ã®ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³å”èª¿å‡¦ç†ã¯æœªå®Ÿè£…
- ç¾åœ¨ã¯å¾…æ©Ÿã™ã‚‹ã®ã¿

---

## 3. äº¤æ›å‡¦ç†ãƒ•ãƒ­ãƒ¼å›³

### ã‚¿ã‚¹ã‚¯äº¤æ›ï¼ˆTask Swapï¼‰ã®å®Œå…¨ãƒ•ãƒ­ãƒ¼

```
Agent 1                         Agent 2
  â”‚                               â”‚
  â”‚ ã‚¿ã‚¹ã‚¯å—ä¿¡: pickup=(5,5)      â”‚ ç¾åœ¨ä½ç½®: (5,5)
  â”‚ Agent2ãŒ(5,5)ã«ã„ã‚‹ï¼          â”‚ ã‚¿ã‚¹ã‚¯å®Ÿè¡Œä¸­
  â”‚                               â”‚
  â”œâ”€ swap_request â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚
  â”‚  {task: Task1}                â”‚
  â”‚                               â”‚ swap_requestå—ä¿¡
  â”‚                               â”‚
  â”‚                               â”œâ”€ swap_response â”€â”€â”€â†’â”‚
  â”‚                               â”‚  {task: Task2}      â”‚
  â”‚                               â”‚                     â”‚
  â”‚                               â”‚ â˜…Task1ã«åˆ‡ã‚Šæ›¿ãˆ    â”‚
  â”‚ swap_responseå—ä¿¡             â”‚                     â”‚
  â”‚                               â”‚                     â”‚
  â”‚ â˜…Task2ã«åˆ‡ã‚Šæ›¿ãˆ              â”‚                     â”‚
  â”‚                               â”‚                     â”‚
  â”‚ Task2ã‚’å®Ÿè¡Œé–‹å§‹                â”‚ Task1ã‚’å®Ÿè¡Œé–‹å§‹      â”‚
  â†“                               â†“
```

### TSWAPè¡çªå›é¿ã®åˆ¤æ–­ãƒ•ãƒ­ãƒ¼

```
ç§»å‹•ã—ã‚ˆã†ã¨ã™ã‚‹
  â†“
æ¬¡ã®ä½ç½®ã‚’è¨ˆç®— (A*)
  â†“
æ¬¡ã®ä½ç½®ã«ä»–ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒã„ã‚‹ï¼Ÿ
  â”œâ”€ NO â†’ âœ… ç§»å‹•
  â”‚
  â””â”€ YES â†’ ç›¸æ‰‹ã®çŠ¶æ…‹ã‚’ãƒã‚§ãƒƒã‚¯
        â†“
        ç›¸æ‰‹ãŒã‚´ãƒ¼ãƒ«ã«ã„ã‚‹ï¼Ÿ
        â”œâ”€ YES â†’ ğŸ”„ ã‚´ãƒ¼ãƒ«äº¤æ›è¦æ±‚ï¼ˆæœªå®Ÿè£…ï¼‰
        â”‚         ç¾åœ¨ã¯å¾…æ©Ÿ
        â”‚
        â””â”€ NO â†’ ãƒ‡ãƒƒãƒ‰ãƒ­ãƒƒã‚¯ã‚µã‚¤ã‚¯ãƒ«ï¼Ÿ
              â”œâ”€ YES â†’ ğŸ”„ ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆæœªå®Ÿè£…ï¼‰
              â”‚         ç¾åœ¨ã¯å¾…æ©Ÿ
              â”‚
              â””â”€ NO â†’ â¸ï¸ å˜ç´”å¾…æ©Ÿ
```

---

## 4. å®Ÿè£…ã®è¦ç´„

### âœ… å®Œå…¨å®Ÿè£…æ¸ˆã¿
1. **ä½ç½®æƒ…å ±å…±æœ‰**: ã™ã¹ã¦ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒ1ç§’ã”ã¨ã«ãƒ–ãƒ­ãƒ¼ãƒ‰ã‚­ãƒ£ã‚¹ãƒˆ
2. **è¿‘éš£ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆç®¡ç†**: åŠå¾„5ãƒã‚¹ä»¥å†…ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’èªè­˜
3. **ã‚¿ã‚¹ã‚¯äº¤æ›**: pickup/deliveryã«ä»–ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒã„ã‚‹å ´åˆã€ã‚¿ã‚¹ã‚¯ã‚’äº¤æ›
4. **è¡çªæ¤œå‡º**: æ¬¡ã®ä½ç½®ã«ä»–ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒã„ã‚‹ã“ã¨ã‚’æ¤œå‡º
5. **ãƒ‡ãƒƒãƒ‰ãƒ­ãƒƒã‚¯æ¤œå‡º**: ã‚µã‚¤ã‚¯ãƒ«ã‚’å½¢æˆã—ã¦ã„ã‚‹ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’æ¤œå‡º

### âš ï¸ éƒ¨åˆ†å®Ÿè£…ï¼ˆæ¤œå‡ºã®ã¿ã€äº¤æ›æœªå®Ÿè£…ï¼‰
1. **ã‚´ãƒ¼ãƒ«äº¤æ›**: æ¤œå‡ºæ¸ˆã¿ã ãŒã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸äº¤æ›å‡¦ç†ãªã—
2. **ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³**: æ¤œå‡ºæ¸ˆã¿ã ãŒã€å”èª¿å‡¦ç†ãªã—

### ç¾åœ¨ã®å‹•ä½œ
- è¡çªã‚’æ¤œå‡ºã—ãŸå ´åˆ â†’ **å¾…æ©Ÿ**
- ç›¸æ‰‹ãŒç§»å‹•ã—ãŸã‚‰ â†’ **ç§»å‹•å†é–‹**
- ã‚·ãƒ³ãƒ—ãƒ«ã ãŒã€ãƒ‡ãƒƒãƒ‰ãƒ­ãƒƒã‚¯ã§æ°¸ä¹…å¾…æ©Ÿã®å¯èƒ½æ€§ã‚ã‚Š

---

## 5. ã™ã¹ã¦ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒç›¸äº’ã«è¦‹ã‚‹è¨¼æ‹ 

### ã‚³ãƒ¼ãƒ‰ã®å¯¾ç§°æ€§

**Agent A:**
```rust
// è‡ªåˆ†ã®ä½ç½®ã‚’ãƒ–ãƒ­ãƒ¼ãƒ‰ã‚­ãƒ£ã‚¹ãƒˆ
nearby_agents.update(AgentInfo { ... });

// è¿‘éš£ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’å–å¾—
let nearby = nearby_agents.get_nearby(my_pos, 5);
```

**Agent B:**
```rust
// â˜… åŒã˜ã‚³ãƒ¼ãƒ‰
nearby_agents.update(AgentInfo { ... });
let nearby = nearby_agents.get_nearby(my_pos, 5);
```

**Agent C:**
```rust
// â˜… åŒã˜ã‚³ãƒ¼ãƒ‰
nearby_agents.update(AgentInfo { ... });
let nearby = nearby_agents.get_nearby(my_pos, 5);
```

### å…·ä½“ä¾‹

```
æ™‚åˆ» t=0:
Agent 1 ä½ç½®: (10, 10), Goal: (15, 15)
Agent 2 ä½ç½®: (12, 12), Goal: (5, 5)
Agent 3 ä½ç½®: (20, 20), Goal: (1, 1)

å„ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®NearbyAgents:
- Agent 1: {Agent 2} (è·é›¢4)
- Agent 2: {Agent 1} (è·é›¢4)
- Agent 3: {} (ä»–ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒé ã„)

â˜… Agent 1ã¨Agent 2ã¯ãŠäº’ã„ã‚’èªè­˜ã—ã¦ã„ã‚‹
â˜… ã™ã¹ã¦ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒåŒã˜ãƒ­ã‚¸ãƒƒã‚¯ã§å‹•ä½œã—ã¦ã„ã‚‹
```

---

## çµè«–

âœ… **ã™ã¹ã¦ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒè¿‘ãã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’è¦‹ã¦ã„ã¾ã™**
- P2Pãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã§ä½ç½®æƒ…å ±ã‚’å…±æœ‰
- å„ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒç‹¬ç«‹ã—ã¦è¿‘éš£ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚’ç®¡ç†
- å¯¾ç­‰ãªåˆ†æ•£ã‚·ã‚¹ãƒ†ãƒ ã¨ã—ã¦å‹•ä½œ

âœ… **äº¤æ›å‡¦ç†ã®å®Ÿè£…ç®‡æ‰€**
- **ã‚¿ã‚¹ã‚¯äº¤æ›**: å®Œå…¨å®Ÿè£…ï¼ˆè¡Œ598-673, 698-717ï¼‰
- **ã‚´ãƒ¼ãƒ«äº¤æ›**: æ¤œå‡ºã®ã¿ï¼ˆè¡Œ231-236ï¼‰âš ï¸
- **ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³**: æ¤œå‡ºã®ã¿ï¼ˆè¡Œ238-276ï¼‰âš ï¸

ç¾åœ¨ã¯**ã‚¿ã‚¹ã‚¯äº¤æ›ã®ã¿ãŒå®Œå…¨ã«å‹•ä½œ**ã—ã€ä»–ã®äº¤æ›å‡¦ç†ã¯æ¤œå‡ºå¾Œã«å¾…æ©Ÿã™ã‚‹å‹•ä½œã«ãªã£ã¦ã„ã¾ã™ã€‚
